{% extends 'base.html.twig' %}

{% block title %}Hello LoginController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
    .wide-col {width:250px}
</style>
<script>
	//login function
	function checkLogin(){
		var uname = $('#u_name').val();
		var pass = $('#p_word').val();

		console.log(uname);
		console.log(pass);

		$.post("/LoginRegisterData", {type: "loginUser", un: uname, pw:pass})
			.done(function(data){
			if(data == 'Customer')
			{
                window.location="/Customer"
            }
            else if(data == 'Manager')
            {
                window.location="/Manager"
            }
            else if(data == 'Driver')
            {
                window.location="/Driver"
            }
			});



			$.post("/GetUserId", {un: uname}).done(function(data){
			localStorage.setItem('user_id', data)
			});
	}

	//register function
	function register(){
		var uname = $('#reg_u_name').val();
		var pass = $('#reg_p_word').val();
		var accType = $('#accType').children("option:selected").val();

		console.log(uname);
		console.log(pass);
		console.log(accType);

		$.post("/LoginRegisterData", {type: "registerUser", un: uname, pw:pass, acc:accType})
			.done(function(data){
			alert("User Registered!");
			
			window.location="/login#login";
			});
	}


</script>


    
<!-- Start of first page -->
<div data-role="page" id="foo">
	<div class="example-wrapper">
		
			<div id="login-landing" class="ui-body-a ui-grid-a">
				<div class="ui-block-a">
					<a href="#login" class="center" >Login</a>
				</div>
				<div class="ui-block-b">
					<a href="#register" class="center" >Register</a>
				</div>	
			</div>
	</div>	
</div>
<!-- /page --> 


<!-- Login page -->
<div data-role="page" id="login">
	<div class="example-wrapper ui-body-a">
		<div class="ui-grid-a padding-10">
			<div class="ui-block-a padding-10">
				<label class="" for="text-basic">Username :</label>
				<input class="" type="text" name="text-basic" id="u_name" value="">
			</div>
			<div class="ui-block-b padding-10">
				<label for="text-basic">Password :</label>
				<input type="password" name="text-basic" id="p_word" value="">
			</div>

			<button onclick="checkLogin()" class="ui-btn">Login</button>
		</div>
	</div>
</div>
<!-- /login -->

<!-- Register Page -->
<div data-role="page" id="register">
	<div class="example-wrapper ui-body-a">
		<div class="ui-grid-a padding-10">
			<div class="ui-block-a padding-10">
				<label for="text-basic">Username :</label>
				<input type="text" name="text-basic" id="reg_u_name" value="">
			</div>

			<div class="ui-block-b padding-10">
				<label for="text-basic">Password :</label>
				<input type="password" name="text-basic" id="reg_p_word" value="">
			</div>
		</div>

		<div class="padding-20">
			<h2>Register as :</h2>
				<select id="accType">
			  		<option id="cu">Customer</option>
			  		<option id="dr">Driver</option>
			  		<option id="ma">Manager</option>
				</select>
			<button onclick="register()" class="ui-btn">Register</button>
		</div>
	</div>
</div>
<!-- /register -->
</div>

{% endblock %}
